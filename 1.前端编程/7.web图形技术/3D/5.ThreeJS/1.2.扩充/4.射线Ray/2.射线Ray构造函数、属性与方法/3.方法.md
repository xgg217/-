# 方法

## .intersectTriangle() 方法

+ 射线 `Ray` 有很多关于数学计算的方法
+ 先介绍一个与三角形交叉计算相关的方法 `.intersectTriangle()`,简单说，就是计算一个射线和一个三角形在3D空间中是否交叉。

+ 执行 `.intersectTriangle()` 方法，如果相交返回交点坐标，不相交返回空值 `null`

  ```js
  const ray = new THREE.Ray();
  ray.origin.set(0, 0, 0);//射线起点
  ray.direction = new THREE.Vector3(1,0,0);

  // 三角形三个点坐标
  const p1 = new THREE.Vector3(100, 25, 0);
  const p2 = new THREE.Vector3(100, -25, 25);
  const p3 = new THREE.Vector3(100, -25, -25);
  const point = new THREE.Vector3();//用来记录射线和三角形的交叉点
  // `.intersectTriangle()`计算射线和三角形是否相交叉，相交返回交点，不相交返回null
  const result = ray.intersectTriangle(p1,p2,p3,false,point);
  console.log('交叉点坐标', point);
  console.log('查看是否相交', result);
  ```

+ `.intersectTriangle()` 参数4表示是否进行*背面剔除*，p1,p2,p3可以理解为一个三角形，有正反两面，一面是正面，一面是反面

+ 在一面观察p1,p2,p3，如果沿着三个点的顺序转圈是逆时针方向，表示正面，另一面观察，p1,p2,p3就是顺时针方向，表示背面

+ `.intersectTriangle()` 参数4设为 `true` ，表示进行背面剔除，虽然从几何空间上讲，该案例源码射线和三角形虽然交叉，但在threejs中，三角形背面对着射线，视为交叉无效，进行背面剔除，返回值 `r` 是 `null`

  ```js
  const r = ray.intersectTriangle(p1,p2,p3,true,point);
  console.log('查看是否相交', r);
  ```
