# WebGL

## 概述

+ WebGL经常被当成3D API，人们总想“我可以使用WebGL和一些神奇的东西做出炫酷的3D作品”
+ 事实上WebGL仅仅是一个光栅化引擎，它可以根据你的代码绘制出点，线和三角形
+ 想要利用WebGL完成更复杂任务，取决于你能否提供合适的代码，组合使用点，线和三角形代替实现

## WebGL 与 GLSL

+ WebGL在电脑的GPU中运行，因此你需要使用能够在GPU上运行的代码
+ 这样的代码需要提供成对的方法。每对方法中一个叫顶点着色器， 另一个叫片段着色器，并且使用一种和C或C++类似的强类型的语言 GLSL(GL着色语言)

+ 每一对组合起来称作一个 `program` （着色程序）

+ 顶点着色器的作用是计算顶点的位置
+ 根据计算出的一系列顶点位置，WebGL可以对点， 线和三角形在内的一些图元进行光栅化处理
+ 当对这些图元进行光栅化处理时需要使用片段着色器方法
+ 片段着色器的作用是计算出当前绘制图元中每个像素的颜色值

+ 几乎整个WebGL API都是关于如何设置这些成对方法的状态值以及运行它们。
+ 对于想要绘制的每一个对象，都需要先设置一系列状态值，然后通过调用 `gl.drawArrays` 或 `gl.drawElements` 运行一个着色方法对，使得你的着色器对能够在GPU上运行

## WebGL 精髓

+ WebGL只关心两件事：裁剪空间中的坐标值和颜色值
+ 使用WebGL只需要给它提供这两个东西。
+ 你需要提供两个着色器来做这两件事，一个顶点着色器提供裁剪空间坐标值，一个片段着色器提供颜色值。

+ 无论你的画布有多大，裁剪空间的坐标范围永远是 -1 到 1

## 目的

+ 可以更容易理解three.js等3D引擎的底层原理

+ 通过WebGL熟悉了着色器语言GLSL ES的语法后，再去学习threejs、cesium等引擎的shader就会更加容易

+ 之前学过的div+css、canvas 2d 都是专注于二维图形的

  ![webgl效果](images/webgl效果.png)

## 画笔

+ 二维画笔

  ```js
  const gl = canvas.getContext('2d');
  ```

+ 三维画笔

  ```js
  const gl = canvas.getContext('webgl');
  ```