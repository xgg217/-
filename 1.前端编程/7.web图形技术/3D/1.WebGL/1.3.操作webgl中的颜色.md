# 操作webgl中的颜色

## 操作

+ css 中有一个 `rgba(255,255,255,1)` 颜色，其中r、g、b的定义域是`[0,255]`，这里要和webgl里的颜色区分一下

+ 可以简单了解一下将css颜色解析为webgl 颜色的原理

  ```js
  const rgbaCSS = "rgba(255,100,0,1)";
  const reg = RegExp(/\((.*)\)/);
  const rgbaStr = reg.exec(rgbaCSS)[1];
  const rgb = rgbaStr.split(",").map((ele) => parseInt(ele));
  const r = rgb[0] / 255;
  const g = rgb[1] / 255;
  const b = rgb[2] / 255;
  const a = rgb[3];

  gl.clearColor(r, g, b, a);
  gl.clear(gl.COLOR_BUFFER_BIT);
  ```

+ 效果如下

  ![alt text](images/灵活操作webgl中的颜色.png)

## 案例-多姿多彩的画布

+ 在three.js 里有一个非常完美的颜色对象 `Color` ，我们通过这个对象可以轻松的控制颜色

1. 引入Color 对象：通过CDN 引入的，这种方法不适用于nodejs，因为nodejs 无法直接通过网络路径请求资源

    ```js
    import { Color } from "https://unpkg.com/three/build/three.module.js";
    ```

2. 实例化Color 对象

    ```js
    const color = new Color(1, 0, 0);
    ```

3. 建立色相偏移动画

    ```js
    !(function ani() {
      color.offsetHSL(0.005, 0, 0);
      gl.clearColor(color.r, color.g, color.b, 1);
      gl.clear(gl.COLOR_BUFFER_BIT);
      requestAnimationFrame(ani);
    })();
    ```
