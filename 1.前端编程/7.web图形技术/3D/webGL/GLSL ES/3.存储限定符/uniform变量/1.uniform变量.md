# uniform 变量

## 概述

+ `uniform` 变量传输的是那些对于所有顶点都相同（或与顶点无关）的数据

## 基本使用

+ vec4 是4维的变量类型
+ u_FragColor 就是变量名

  ```js
  <script id="fragmentShader" type="x-shader/x-fragment">
    precision mediump float;
    uniform vec4 u_FragColor;
    void main() {
        gl_FragColor = u_FragColor;
    }
  </script>
  ```

## 获取 uniform 变量的存储位置

+ `gl.getUniformLocation(program, name)` 获取指定名称的 `uniform` 变量存储位置

  + 参数

    + `program` 指定包含顶点着色器和片元着色器的着色器程序对象
    + `name` 指定想要获取其存储地址的 `uniform` 变量名称

  + 返回值

    + `non-null` 指定 `uniform` 变量的位置
    + `null` 指定 `uniform` 变量不存在，或者其命名具有 `gl_` 或 `webgl_` 前缀

+ 错误

  + `INVALLD_OPERATION` 程序对象未能成功连接
  + `INVALLD_VALUE` name参数的长度大于 `uniform` 变量名的最大长度(默认256字节)

+ 注意

  + 如果不存在该变量或者该变量名为保留字则返回 `null`

## 向uniform变量赋值

+ `gl.uniform4f`

  + 4 是有4个数据
  + f 是 `float` 浮点类型

+ `gl.uniform4fv`

  + 4 是有4个数据
  + v 是vector 矢量的意思，这在数学里就是向量的意思
  + 第二个参数必须是 `Float32Array` 数组，不要使用普通的Array 对象
  + `Float32Array` 是一种32 位的浮点型数组，它在浏览器中的运行效率要比普通的Array 高很多

  ```js
  gl.uniform4f(u_FragColor,1.0,1.0,0.0,1.0);
  //等同于
  const color=new Float32Array([1.0,1.0,0.0,1.0]);
  gl.uniform4fv(u_FragColor,color);
  ```

+ `uniform4f()` 和 `uniform4fv()` 也有着自己的同族方法，其中的4 可以变成1|2|3

