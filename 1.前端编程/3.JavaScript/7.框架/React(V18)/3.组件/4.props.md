# props

## 概述

+ 和 Vue 一样，在 React 中组件会存在层级关系，那么自然会涉及到组件之间进行数据的传递

+ 如果是父组件向子组件传递数据，则使用 props

+ 如果是函数组件，props 作为函数的一个参数传入

  ```js
  function 组件名(props) {
    return (
      // 一段 JSX
      // 通过 props.xxx 获取传入的值
      <div>
        <p>姓名：{props.name}</p>
        <p>年龄：{props.age}</p>
        <p>性别：{props.gender}</p>
      </div>
    );
  }
  ```

+ 如果是类组件，则需要在 constructor 中将 props 通过 super 传递给父类，然后通过 this.props 的方式来获取传入的值：

  ```js
  class 组件名 extends React.Component {
    constructor(props) {
      super(props);
    }
    render() {
      return (
        // 一段 JSX
        // 通过 this.props.xxx 获取传入的值
          <div>
            <p>姓名：{this.props.name}</p>
            <p>年龄：{this.props.age}</p>
            <p>性别：{this.props.gender}</p>
          </div>
      );
    }
  }
  ```

## props 验证

+ 在 Vue 中，可以对传入的 props 设置默认值，以及验证 props 的有效性，在 React 中，针对 props 也可以做这些事

+ 通过 defaultprops 就可以对 props 设置默认值

  ```js
  function Greeting(props) {
    const { name, age, gender } = props;
    return (
      <div>
        <p>姓名：{name}</p>
        <p>年龄：{age}</p>
        <p>性别：{gender}</p>
      </div>
    );
  }
  // 设置默认的 props 值，当组件没有传值时会使用默认值
  Greeting.defaultProps = {
    name : 'xiejie',
    age : 18,
    gender : 'male'
  };
  ```

  ```js
  class Greeting extends React.Component {
    constructor(props) {
      super(props);
    }
    // 设置默认的 defaultProps 属性值
    static defaultProps = {
      name : "xiejie",
      age : 18,
      gender : 'male'
    }
    render() {
      return (
        <div>
          <p>姓名：{this.props.name}</p>
          <p>姓名：{this.props.age}</p>
          <p>姓名：{this.props.gender}</p>
        </div>
      );
    }
  }

  // 或者
  Greeting.defaultProps = {
    name : "xiejie",
    age : 18,
    gender : 'male'
  }
  ```

##  prop-types 库

+ 关于 props 的类型检查，从 React v15.5 版本开始，移入到了 prop-types 库

  ```js
  import PropTypes from 'prop-types';

  class Greeting extends React.Component {
    render() {
      return (
        <h1>Hello, {this.props.name}</h1>
      );
    }
  }

  Greeting.propTypes = {
    name: PropTypes.string
  };
  ```

  ```js
  import PropTypes from 'prop-types'

  function HelloWorldComponent({ name }) {
    return (
      <div>Hello, {name}</div>
    )
  }

  HelloWorldComponent.propTypes = {
    name: PropTypes.string
  }

  export default HelloWorldComponent
  ```
