# 创建着色器

## 创建着色器

+ `gl.createShader(type)`

  + 参数

    + type

      + `gl.VERTEX_SHADER` 顶点着色器
      + `gl.FRAGMENT_SHADER` 片元着色器

## 向着色器中添加资源

+ `gl.shaderSource(shader, source)`

  + shader 着色器
  + source 添加的程序（字符串类型）

## 编译着色器代码：

+ `gl.compileShader(shader)`

  + shader 要编译的着色器


## 示例

+ code

  ```html
  <canvas id="canvas" width="500" height="500"></canvas>

  <script type="notjs" id="vertex">
    void main () {
      gl_Position = vec4(0, 0, 0, 0);
      gl_PointSize = 10.0;
    }
  </script>

  <script type="notjs" id="fragment">
    void main () {
      gl_FragColor = vec4(0, 0, 0, 1);
    }
  </script>

  <script>
    const canvas = document.getElementById('canvas');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const gl = canvas.getContext('webgl');


    // 获取顶点着色器内容
    const vertexStr = document.getElementById('vertex').innerText;
    // 获取片元着色器内容
    const fragmentStr = document.getElementById('fragment').innerText;

    // 创建着色器
    const createShader = (gl, sourceCode, type) => {
      const shader = gl.createShader(type);
      gl.shaderSource(shader, sourceCode);
      gl.compileShader(shader);

      // 查看是否编译成功
      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        // 获取编译错误
        var info = gl.getShaderInfoLog(shader);
        throw "Could not compile WebGL program. \n\n" + info;
      }
      return shader;
    }

    const vertexShader = createShader(gl, vertexStr, gl.VERTEX_SHADER); // 创建顶点着色器
    const fragmentShader = createShader(gl, fragmentStr, gl.FRAGMENT_SHADER); // 创建片元着色器
  </script>
  ```



