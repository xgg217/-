# 协程

## 概述

+ 协程不是计算机提供的，而是程序员创造出来的
+ 协程 coroutine 也可以成为微线程。是一种用户态内的上下文切换技术
+ 简而言之就是通过一个线程实现代码相互切换执行

## 实现协程

+ greenlet 早起模块
+ yield 关键字
+ asyncio 装饰器（py 3.4）
+ async await 关键字（py 3.5） **推荐**

## 协程的意义

+ 在一个线程中如果遇到 IO 等待时间，线程不会傻傻的，利用空闲的时间再去干点其他的事情

## 名词

+ 协程函数： 定义函数的时候 `async def 函数():`
+ 协程对象：执行 `协程函数()` 得到的协程对象。执行协程函数创建协程对象，函数内部代码不会执行。如果想要运行协程函数内部代码，必须要将写成对象交给事件循环来处理

  ```py
  # 协程函数
  async def func():
    # ...

  # 得到协程对象。但函数内部不会执行
  result = func()

  # 得到协程对象。但函数内部不会执行
  result = func()

  # 运行函数
  asyncio.run(result)
  ```
