# 字符串计算机的存储

## 概述

+ 字符串在计算机里存的到底是什么东西，首先肯定不能存文字，因为计算机存不了文字，它只能存数字

+ 因此字母 a 在计算机里存的是啥呢？是一个数字 97

+ 把从一个字符变到一个数字的过程叫做编码，每一个文字它都对应一个数字

+ 因为 Emoji 表情也是文字，所以它也会对应数字

## 存储

+ 计算机在存这些数字的时候它占用的内存空间是多少呢？这就要看编码的方式了

+ 在绝大部分语言里包括 JS，它这种编码的数字，使用的是 UTF-16 编码，那么也就意味着每一个字符对应的内存空间是 16 位的二进制，也就是两个字节，一个字节占八位

+ 所以你要得到一个字符串所占的内存空间，就是字符串的长度乘以 2，就得到它所占用的字节数，因为每一个字符占两个字节 16 位，那么每一个数字，它的存储空间是 16 位，它能存的数字范围是 2 的 16 次方2**16 = 65536 也就是说它的范围是 0 ~ 65536，一共能存 65536 个数字，如果说把它换成 16 进制的话就是 0000 ~ ffff 这个范围

+ 那么可想而知，这么小的范围如果说是世界上的常用文字的话还能覆盖，如果说是非常用文字，比如说 Emoji 表情或者是一些生僻字，就存不下了

+ 比如说有一个字符它的数字是 246813579，这就存不下了，那这种情况就会分为两个十六位来存，两个十六位的范围是 32 位，2**36 = 4294967296，两个十六位指定都存的下了

## 概念

+ 这个 16 位的内存空间是一个存储的基本单元，我们把它叫做 Code Unit 称之为码元

  ```js
  ('s').codePointAt(0); // 115

  // 字符 “s” 对应的数字是 115，远远小于 65536，所有字符 “s” 只有一个码元
  ```

  ```js
  const str = "🐶";
  str.codePointAt(0) // 128054

  ```

  + 获取字符串码元数 `('s').codePointAt()`

+ 而一个文字它对应的数字有可能占 1 个 16 位，也有可能占 2 个 16 位，无论多少位都叫做 Code Point 称之为码点

+ 码点表达了一个字符完整的数字，而一个码点可能对应 1 个码元，也有可能对应 2 码元
