# 四元数乘法运算

## 概述

+ hree.js四元数 `Quaternion` 提供了多个用于四元数乘法运算的方法，比如 `.multiply()`、 `.multiplyQuaternions()`、 `.premultiply()`，这些方法本质上都一样，只是语法细节不同

## .multiply()含义

+ 两个四元数分别表示一个旋转，如果相乘，会得到一个新的四元数，新四元数表示两个旋转的组合旋转

  ```js
  // 在物体原来姿态基础上，进行旋转
  const q1 = new THREE.Quaternion();
  q1.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 2);
  fly.quaternion.multiply(q1);
  // 在物体上次旋转基础上，进行旋转
  const q2 = new THREE.Quaternion();
  q2.setFromAxisAngle(new THREE.Vector3(0, 1, 0), Math.PI / 2);
  fly.quaternion.multiply(q2);
  // 在物体上次旋转基础上，进行旋转
  const q3 = new THREE.Quaternion();
  q3.setFromAxisAngle(new THREE.Vector3(0, 0, 1), Math.PI / 2);
  fly.quaternion.multiply(q3);
  ```

## 四元数乘法顺序

+ 四元数乘法不满足交换律，`q1.clone().multiply(q2)` 和`q2.clone().multiply(q1)` 表示的旋转结果不同

  ```js
  // 在物体原来姿态基础上，进行旋转
  const q1 = new THREE.Quaternion();
  q1.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 2);
  fly.quaternion.multiply(q1);
  // 在物体上次旋转基础上，进行旋转
  const q2 = new THREE.Quaternion();
  q2.setFromAxisAngle(new THREE.Vector3(0, 1, 0), Math.PI / 2);
  fly.quaternion.multiply(q2);
  ```
