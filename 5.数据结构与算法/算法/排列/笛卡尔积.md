# 笛卡尔积

## 概述

+ 笛卡尔乘积是指在数学中，两个集合X和Y的笛卡尓积，又称直积，表示为X × Y，第一个对象是X的成员而第二个对象是Y的所有可能有序对的其中一个成员

+ 假设集合A={a, b}，集合B={0, 1, 2}，则两个集合的笛卡尔积为{(a, 0), (a, 1), (a, 2), (b, 0), (b, 1), (b, 2)}

  ![alt text](笛卡尔积.jpg)

## 使用场景

+ 淘宝的sku商品订单组合的实现就需要笛卡尔乘积，根据商品的子类型和不同尺寸生成n种可能的组合

## 笛卡尔积的javascript实现

+ 实现

  ```js
  /**
   * 笛卡尔积
    * @param {any[]} arr
    */
  function cartesian(arr) {
    if (arr.length < 2) return arr[0] || [];
    return [].reduce.call(arr, function (col, set) {
      let res = [];
      col.forEach(c => {
        set.forEach(s => {
          let t = [].concat(Array.isArray(c) ? c : [c]);
          t.push(s);
          res.push(t);
        })
      });
      return res;
    });
  }
  ```

  ```js
  // 使用
  const arr = [
    [{a:1},{b:2}],
    ['透气','防滑'],
    ['37码','38码','39码']
  ];

  cartesian(arr);

  [
    [ '黑色', '透气', '37码' ],
    [ '黑色', '透气', '38码' ],
    [ '黑色', '透气', '39码' ],
    [ '黑色', '防滑', '37码' ],
    [ '黑色', '防滑', '38码' ],
    [ '黑色', '防滑', '39码' ],
    [ '红色', '透气', '37码' ],
    [ '红色', '透气', '38码' ],
    [ '红色', '透气', '39码' ],
    [ '红色', '防滑', '37码' ],
    [ '红色', '防滑', '38码' ],
    [ '红色', '防滑', '39码' ]
  ]
  ```
